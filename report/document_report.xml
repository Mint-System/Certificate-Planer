<odoo>

    <report 
        id="document_report"
        model="certificate_planer.document"
        string="Document Report"
        name="certificate_planer.document_report_view"
        file="certificate_planer.document_report"
        report_type="qweb-pdf"
    />

    <template id="document_report_view">
        <t t-call="web.html_container">

            <div class="header">
                <h4 t-esc="type.name"/>
            </div>

            <t t-call="web.internal_layout">
                <div class="page">

                    <h1 t-esc="type.name"/>
                    <p>Print Date:</p>

                    <table class="table">
                        <tr>
                            <td>Document No:</td>
                            <td><h2 t-esc="document.name"/></td>
                            <td>Revision:</td>
                            <td><h2 t-esc="revision.state_id.name"/></td>
                        </tr>
                        <tr>
                            <td>Subject:</td>
                            <td><h2 t-esc="document.description"/></td>
                            <td></td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>Project Number:</td>
                            <td><h2 t-esc="certificate.name"/></td>
                            <td></td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>Airfcraft Type:</td>
                            <td><h2 t-esc="certificate.aircraft"/></td>
                            <td></td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>Requirements:</td>
                            <td><h2 t-esc="certificate.specification_id.name"/></td>
                            <td></td>
                            <td></td>
                        </tr>
                    </table>

                    <p>This document contains confidential information and is proprietary to Aerolite AG. It may not be disclosed, reproduced or utilised in any way, in whole or in part, without the written consent of Aerolite AG.</p>

                    <p style="page-break-before:always;" />

                    <h2>Log of Ammendments</h2>

                    <table class="table">
                    <t t-foreach="issue_groups" t-as="group">

                        <tr>
                            <td><strong><p t-field="group.name"/></strong></td>

                            <td>
                            <t t-foreach="log[group.id]['issues']" t-as="issue">
                                <p t-field="issue.name"/>
                                <p>Authority Ref: <span t-field="issue.project_number"/><br/>
                                Internal Project Ref: <span t-field="issue.authority_number"/></p>

                                <table class="table-striped">
                                <t t-foreach="issue.revision_ids" t-as="revision">
                                    <tr>
                                        <td><span t-field="revision.document_id.name"/></td>
                                        <td><span t-field="revision.document_id.description"/></td>
                                        <td><span t-field="revision.state_id"/></td>
                                    </tr>
                                </t>
                                </table>
                            </t>
                            </td>
                        </tr>
                    </t>
                    </table>

                    <p style="page-break-before:always;" />

                    <h2>Parts and Documents</h2>

                    <p t-field="certificate.part_id.name"/>

                    <t t-foreach="certificate.part_id.document_ids" t-as="document">
                        <span t-field="document.name"/><span t-field="document.current_revision_id.state_id"/><br/>
                    </t>

                    <br />
                    <p>Child Parts:</p>

                    <t t-set="i" t-value="1"/>

                    <t t-foreach="certificate.part_id.bom_id.part_ids" t-as="part">
                        <span t-esc="i"/>:
                        <t t-set="i" t-value="i+1"/>
                        <span t-field="part.name"/><br/>
                    </t>

                </div>
            </t>

            <div class="footer">
                <h4 t-esc="revision.state_id.name"/>
            </div>
        </t>
    </template>

</odoo>
